/**
*  Importer
*  simple manager for classes and assets with dependencies for PHP, JavaScript, Python
*
*  @version 1.1.6
*  https://github.com/foo123/Importer
**/
!function(t,e,l){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils.import?(t.$deps=t.$deps||{})&&(t.EXPORTED_SYMBOLS=[e],t[e]=t.$deps[e]=l.call(t)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[e]=l.call(t)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["module"],function(e){return l.moduleUri=e.uri,l.call(t)}):e in t||(t[e]=l.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[e]})}("undefined"!=typeof self?self:this,"Importer",function(_){"use strict";function r(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function p(e){return u["@mozilla.org/network/io-service;1"].getService(d.nsIIOService).newURI(e,null,null).QueryInterface(d.nsIFileURL).file}var e,t="prototype",N=Object[t].hasOwnProperty,w="setAttribute",q="toLowerCase",l=Object[t].toString,m=Array[t].map,a=Object.keys,n=String[t].startsWith?function(e,t,l){return e.startsWith(t,l||0)}:function(e,t,l){return t===e.substr(l=l||0,t.length+l)},O="undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils.import,R=!O&&"undefined"!=typeof global&&"[object global]"===l.call(global),B=!O&&!R&&"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator,k=!O&&!R&&!B&&"undefined"!=typeof navigator,s=O?Components.utils:null,u=O?Components.classes:null,d=O?Components.interfaces:null,E=(O&&(s.import("resource://gre/modules/NetUtil.jsm"),s.import("resource://gre/modules/osfile.jsm")),O?this:R?global:B?this:window),i=R?require("fs"):null,X=O?function(e,t,l){return s.import(t,l),l[e]}:R?function(e,t,l){var n=null;try{n=require(t)}catch(e){n=null}return n}:B?function(e,t,l){return importScripts(t),l[e]}:function(){},y=/\/|\\/g,c="://",h="#PROTOCOL#",T=/[\-.\/\\:]+/g,f=O?((e=u["@mozilla.org/file/directory_service;1"].getService(d.nsIProperties).get("ProfD",d.nsIFile)).append("abc"),e.append("abc"),e.path.substr(e.path.length-"abc".length-1,1)):R?require("path").sep:"/",W=O?function(e,t,l){var n,e=p(e),s=u["@mozilla.org/network/file-input-stream;1"].createInstance(d.nsIFileInputStream);if("binary"===t){var r=u["@mozilla.org/binaryinputstream;1"].createInstance(d.nsIBinaryInputStream);s.init(e,-1,-1,!1),n=s.available(),r.setInputStream(s),r.readByteArray(n,c=new Uint8Array(n)),r.close()}else{var a,i=u["@mozilla.org/intl/converter-input-stream;1"].createInstance(d.nsIConverterInputStream),o={value:""},c=null;for(s.init(e,-1,0,0),i.init(s,t,0,0);a=i.readString(4294967295,o),null==c&&(c=""),c+=o.value,0!=a;);i.close(),null==c&&(c=null!=l?l:"")}return c}:R?function(e,t,l){e=i.readFileSync(e,"binary"===t?{}:{encoding:t});return e||("binary"===t?null!=l?l:null:null!=l?l:"")}:function(e,t,l){var n=r();return n.open("GET",e,!1),"binary"===t?n.responseType="arraybuffer":(n.responseType="text",n.setRequestHeader("Content-Type","text/plain; charset="+t),n.overrideMimeType("text/plain; charset="+t)),n.send(null),200===n.status?"binary"===t?n.response:n.responseText:"binary"===t?null!=l?l:null:null!=l?l:""},L=O?function(e,s,r,a){return NetUtil.asyncFetch(p(e),function(e,t){var l,n=null;Components.isSuccessCode(t)?"binary"===s?(t=u["@mozilla.org/binaryinputstream;1"].createInstance(d.nsIBinaryInputStream),l=e.available(),t.setInputStream(e),t.readByteArray(l,n=new Uint8Array(l)),t.close()):n=NetUtil.readInputStreamToString(e,e.available(),{charset:s}):n="binary"===s?null!=a?a:null:null!=a?a:"",r&&r(n)}),""}:R?function(e,t,l,n){return"binary"===t?i.readFile(e,function(e,t){l&&l(e?null!=n?n:null:t)}):i.readFile(e,{encoding:t},function(e,t){l&&l(e?null!=n?n:"":t)}),""}:function(e,t,l,n){var s=r();return s.open("GET",e,!0),"binary"===t?(s.responseType="arraybuffer",s.onload=function(){l&&l(200===s.status?s.response:null!=n?n:null)}):(s.responseType="text",s.setRequestHeader("Content-Type","text/plain; charset="+t),s.overrideMimeType("text/plain; charset="+t),s.onload=function(){l&&l(200===s.status?s.responseText:null!=n?n:"")}),s.send(null),""};function U(e){return"function"==typeof e}function g(e){return e instanceof String||"[object String]"===l.call(e)}function I(e){return e instanceof Array||"[object Array]"===l.call(e)}function F(e){var t;return!e||(t=l.call(e),(e instanceof Array||e instanceof String||"[object Array]"===t||"[object String]"===t)&&!e.length)}function A(e){return I(e)?e:[e]}function P(e,t){for(var l=a(t),n=0,s=l.length;n<s;++n)e[l[n]]=t[l[n]];return e}function M(e,t){if(!e)return t||"";var l=a(e);if(t){for(s=0,r=l.length;s<r;++s)t[w](l[s],!0===e[l[s]]?l[s]:e[l[s]]);return t}for(var n=[],s=0,r=l.length;s<r;++s)n.push(l[s]+(!0===e[l[s]]?"":'="'+e[l[s]]+'"'));return n.join(" ")}function D(e){return document.getElementById(e)}function z(e){return document.createElement(e)}function H(e,t){e=document.getElementsByTagName(e);return 1<arguments.length?t<0?e[e.length+t]:e[t]:e}function $(e,t,l,n){var s,r,a,i=null,o=null;if("html"===e)for((a=z("div")).innerHTML=t;a.firstChild;)"SCRIPT"!==i.firstChild.nodeName&&"STYLE"!==i.firstChild.nodeName&&"LINK"!==i.firstChild.nodeName||(i=a.firstChild),document.head.appendChild(a.firstChild);else switch(e){case"tpl-link":case"tpl":i=z("script"),n?M(n,i):i[w]("type","text/x-template"),i.appendChild(document.createTextNode(t)),document.head.appendChild(i);break;case"script-link":if(l)for(s=(r=H("script")).length-1;0<=s;--s)if(r[s].src&&t===r[s].src){o=r[s];break}o?i=o:(i=z("script"),n?M(n,i):i[w]("type","text/javascript"),i[w]("src",t),document.head.appendChild(i));break;case"script":i=z("script"),n?M(n,i):i[w]("type","text/javascript"),i.appendChild(document.createTextNode(t)),document.head.appendChild(i);break;case"style-link":if(l)for(s=(r=H("link")).length-1;0<=s;--s)if(t===r[s].href){o=r[s];break}o?i=o:((i=z("link"))[w]("rel","stylesheet"),n?M(n,i):(i[w]("type","text/css"),i[w]("media","all")),i[w]("href",t),document.head.appendChild(i));break;default:if(i=z("style"),n?M(n,i):(i[w]("type","text/css"),i[w]("media","all")),i.appendChild(document.createTextNode("")),document.head.appendChild(i),t){var c,p,u,d,h,f=i,_=t,m=typeof _;if("object"==m&&null!=m)for(c in p=0,_)N.call(_,c)&&(d=(u=_[c]).selector,h=[].concat(u.rules).join("; "),"insertRule"in f.sheet?(f.sheet.insertRule(d+"{"+h+"}",p),u.css=f.sheet.cssRules[p]):"addRule"in f.sheet&&(f.sheet.addRule(d,h,p),u.css=f.sheet.rules[p]),++p);else"string"==m&&(f.styleSheet?f.styleSheet.cssText=(f.styleSheet.cssText||"")+_:f.appendChild(document.createTextNode(_)))}}return i}function b(e){return e.split(c).join(h)}function o(){var e,t,l,n,s,r,a,i=arguments,o=f;if(!i.length)return".";if(!(t=(i=m.call(i,b).join(o)).length))return".";for(e=i.charAt(0),t=i.charAt(t-1),n=[],s=0,r=(l=i.split(y).filter(Boolean)).length-1;0<=r;)".."===(a=l[r])?s++:"."!==a&&(s?--s:n.push(l[r])),--r;return(i=(i=n.reverse().join(o))||e?i:".")&&t===o&&(i+=o),(e===o?o:"")+i.split(h).join(c)}function v(){var e,t=f;return f="/",e=o.apply(null,arguments),f=t,e}return(e=function e(t,l){var n=this;if(!(n instanceof e))return new e(t,l);n.base="",n.base_url="",n.base_path(t,l),n._classmap={__global__:{}},n._classes={__global__:{}},n._assets={__global__:{}},n._hooks={__global__:{}},n._cache={}}).VERSION="1.1.6",e.BASE="./",e.path_join=function(){var e,t=arguments,l=".";return l=t.length?O?OS.Path.join.apply(OS.Path,t):R?(e=require("path")).join.apply(e,t):o.apply(null,t):l},e.join_path=o,e.join_path_url=v,e.attributes=M,e[t]={constructor:e,base:null,base_url:null,_classmap:null,_classes:null,_assets:null,_hooks:null,_cache:null,dispose:function(){var e=this;return e._classmap=null,e._classes=null,e._assets=null,e._hooks=null,e._cache=null,e.base=null,e.base_url=null,e},on:function(e,t,l,n){var s=this;return(l=null==l?"__global__":l)&&!F(e)&&U(t)&&(N.call(s._hooks,l)||(s._hooks[l]={}),N.call(s._hooks[l],e)||(s._hooks[l][e]=[]),s._hooks[l][e].push([t,!0===n,0])),s},one:function(e,t,l){return this.on(e,t,l,!0)},off:function(e,t,l){var n,s,r=this;if((l=null==l?"__global__":l)&&N.call(r._hooks,l)&&!F(e)&&!F(r._hooks[l][e]))if(!0===t)delete r._hooks[l][e];else if(t)for(s=(n=r._hooks[l][e]).length-1;0<=s;--s)t===n[s][0]&&n.splice(s,1);return r},trigger:function(e,t,l){var n,s,r;if((l=null==l?"__global__":l)&&N.call(this._hooks,l)&&!F(e)&&!F(this._hooks[l][e])){for(n=this._hooks[l][e],t=t||[],s=0;s<n.length&&((r=n[s])[1]&&r[2]||!(r[2]=1)!==r[0].apply(null,t));++s);for(s=n.length-1;0<=s;--s)n[s][1]&&n[s][2]&&n.splice(s,1)}return this},base_path:function(e,t){var l=this;return g(e)&&e.length?l.base=e:!1===e&&(l.base=""),g(t)&&t.length?l.base_url=t:!1===t&&(l.base_url=""),l},get_path:function(e,t,l){return F(e)?t||"":!F(t)&&(n(e,"./")||n(e,"../")||n(e,".\\")||n(e,"..\\"))?(!0===l?v:o)(t,e):e},path:function(e){return this.get_path(e||"",R?this.base:this.base_url)},path_url:function(e){return this.get_path(e||"",this.base_url,!0)},register:function(e,t,l){var n,s,r,a,i,o,c,p,u,d,h=this,f=h._classes,_=h._classmap,m=h._assets;if(null==l&&(l="__global__"),e=String(e).toLowerCase(),l&&I(t)&&t.length)if(I(t[0])||(t=[t]),"classes"===e)for(n=0,s=t.length;n<s;++n)r=(a=t[n])[0],i=a[1],o=a[2],c=a[3]||[],F(r)||F(i)||F(o)||(N.call(f,l)||(f[l]={}),N.call(_,l)||(_[l]={}),o=h.path(o),f[l][i]=[r,i,o,A(c),!1],_[l][r]=[o,i]);else if("assets"===e)for(n=0,s=t.length;n<s;++n)u=(a=t[n])[0],i=a[1],d=a[2],c=a[3]||[],p=a[4]||{},F(u)||F(i)||F(d)||("scripts-composite"===(u=u[q]())||"styles-composite"===u||"scripts-alt"===u||"styles-alt"===u?d=A(d):g(d)&&(d=h.path_url(d)),N.call(m,l)||(m[l]={}),m[l][i]=[u,i,d,A(c),p,!1,!1]);return h},import_class:function(e,n,s){var t,l,r,a,i,o,c,p,u,d=this,h=d._classes,f="class-"+e,_=d._cache;if(null==s&&(s="__global__"),N.call(_,s+"--"+f))U(n)&&n.call(d,_[s+"--"+f]);else{for(l=!1,c=[],t=[e];t.length;)if(e=t[0],p=N.call(h,s)&&N.call(h[s],e)?s:"__global__",N.call(h[p],e)&&!h[p][e][4])if(l=!0,N.call(E,h[p][e][0]))t.shift(),h[p][e][4]=!0,c.push({id:e,type:"class",cache_id:"class-"+e,name:h[p][e][0],path:h[p][e][2],ctx:s,loaded:E[h[p][e][0]]});else{if(!F(o=h[p][e][3])){for(r=!1,a=o.length-1;0<=a;--a)i=o[a],u=N.call(h,s)&&N.call(h[s],i)?s:"__global__",N.call(h[u],i)&&!h[u][i][4]&&(r=!0,t.unshift(i));if(r)continue}t.shift(),h[p][e][4]=!0,c.push({id:e,type:"class",cache_id:"class-"+e,name:h[p][e][0],path:h[p][e][2],ctx:s})}else N.call(h[p],e)&&(l=!0),t.shift();if(l&&c.length){var m,g,y,b,v,x,C=d,S=E,j=_,k=c,T=function(){for(var e=arguments,t=0,l=e.length;t<l;++t)_[s+"--"+c[t].cache_id]=e[t];U(n)&&n.call(d,_[s+"--"+f])},I=k.length,A=new Array(I);if(O||R||B){for(m=0;m<I;++m)N.call(k[m],"loaded")?(A[m]=k[m].loaded,C.trigger("import-class",[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx).trigger("import-class-"+k[m].id,[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx)):N.call(j,k[m].ctx+"--"+k[m].cache_id)?A[m]=j[k[m].ctx+"--"+k[m].cache_id]:"class"!==k[m].type?A[m]=j[k[m].ctx+"--"+k[m].cache_id]=W(k[m].path,O?"UTF-8":"utf8"):k[m].name in S?A[m]=S[k[m].name]:(A[m]=X(k[m].name,k[m].path,S)||null,C.trigger("import-class",[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx).trigger("import-class-"+k[m].id,[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx));T.apply(S,A)}else{for(b=H("head",0),m=g=0,v=function(t,l,n,e,s){var r,a;"style"===n||"script"===n?(a=D(t))&&n===a.tagName[q]()?s():L(e,"utf8",function(e){j[l+"--"+t]=e,$(n,e)[w]("id",t),s()}):"class"!==n?"template"===n&&(a=D(t))&&"script"===a.tagName[q]()?s():L(e,"utf8",function(e){j[l+"--"+t]=e,"template"!==n||D(t)||$("tpl",e)[w]("id",t),s()}):(a=D(t))&&"script"===a.tagName[q]()?s():(r=0,(a=z("script"))[w]("id",t),a[w]("type","text/javascript"),a.onload=a.onreadystatechange=function(){r||a.readyState&&"loaded"!=a.readyState&&"complete"!=a.readyState||(r=1,a.onload=a.onreadystatechange=null,s())},a[w]("src",e),b.appendChild(a))},x=function e(){var t;N.call(k[m],"loaded")||(t=N.call(j,k[m].ctx+"--"+k[m].cache_id))||k[m].name in S?(A[m]=(N.call(k[m],"loaded")?k[m].loaded:t?j[k[m].ctx+"--"+k[m].cache_id]:S[k[m].name])||null,C.trigger("import-class",[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx).trigger("import-class-"+k[m].id,[C,k[m].id,k[m].name,k[m].path,A[m]],k[m].ctx),++m>=I?T.apply(S,A):N.call(k[m],"loaded")||(t=N.call(j,k[m].ctx+"--"+k[m].cache_id))||k[m].name in S?(A[m]=(N.call(k[m],"loaded")?k[m].loaded:t?j[k[m].ctx+"--"+k[m].cache_id]:S[k[m].name])||null,e()):(S[k[m].name]=null,v(k[m].cache_id,k[m].ctx,k[m].type,k[m].path,e))):++g<4?setTimeout(e,20):(g=0,S[k[m].name]=null,C.trigger("import-class",[C,k[m].id,k[m].name,k[m].path,null],k[m].ctx).trigger("import-class-"+k[m].id,[C,k[m].id,k[m].name,k[m].path,null],k[m].ctx),m++,e())};m<I&&(N.call(k[m],"loaded")||(y=N.call(j,k[m].ctx+"--"+k[m].cache_id))||k[m].name in S);)A[m]=(N.call(k[m],"loaded")?k[m].loaded:y?j[k[m].ctx+"--"+k[m].cache_id]:S[k[m].name])||null,m++;m<I?v(k[m].cache_id,k[m].ctx,k[m].type,k[m].path,x):T.apply(S,A)}}else U(n)&&n.call(d,null)}return d},import_asset:function(e,u){var t,l,n,s,r,a,i,o,c,p,d,h,f,_,m,g,y,b,v=this,x=[e],C=v._assets,S=[],j=[];for(null==u&&(u="__global__");x.length;)if(e=x[0],y=N.call(C,u)&&N.call(C[u],e)?u:"__global__",N.call(C[y],e)&&C[y][e][5]&&!C[y][e][6]){if(d=(y=C[y][e])[0],e=y[1],i=y[2],t=y[3],l=y[4],t&&t.length){for(s=!1,r=t.length-1;0<=r;--r)a=t[r],b=N.call(C,u)&&N.call(C[u],a)?u:"__global__",N.call(C[b],a)&&!C[b][a][6]&&(s=C[b][a][5]=!0,x.unshift(a));if(s)continue;x.shift()}if(y[6]=!0,v.trigger("import-asset",[v,e,d,i,y={}],u).trigger("import-asset-"+e,[v,e,d,i,y],u),null!=y.return)S.push(y.return);else if(y="styles"===d||"styles-composite"===d,c="scripts"===d||"scripts-composite"===d,p="templates"===d,h="scripts-alt"===d||"styles-alt"===d,f=!(d="scripts-composite"===d||"styles-composite"===d)&&!h&&I(i),o=e.replace(T,"_"),y)if(n=P({type:"text/css",media:"all"},l),k)if(f)S.push(g=D("importer-inline-style-"+o)||$("style",i[0],!1,n)),g[w]("id","importer-inline-style-"+o);else if(d)for(_=0,m=i.length;_<m;++_)I(i[_])?(S.push(g=D("importer-inline-style-"+o+"-part-"+_)||$("style",i[_][0],!1,n)),g[w]("id","importer-inline-style-"+o+"-part-"+_)):(S.push(g=D("importer-style-"+o+"-part-"+_)||$("style-link",v.path_url(i[_]),!0,n)),g[w]("id","importer-style-"+o+"-part-"+_));else S.push(g=h?D("importer-style-"+o)||$("html",i[0]):D("importer-style-"+o)||$("style-link",v.path_url(i),!0,n)),g[w]("id","importer-style-"+o);else if(n=M(n),f)S.push('<style id="importer-inline-style-'+o+'" '+n+">"+i[0]+"</style>");else if(d)for(_=0,m=i.length;_<m;++_)I(i[_])?S.push('<style id="importer-inline-style-'+o+"-part-"+_+'" '+n+">"+i[_][0]+"</style>"):S.push('<link id="importer-style-'+o+"-part-"+_+'" href="'+v.path_url(i[_])+'" rel="stylesheet" '+n+" />");else S.push(h?i[0]:'<link id="importer-style-'+o+'" href="'+v.path_url(i)+'" rel="stylesheet" '+n+" />");else if(c)if(n=P({type:"text/javascript"},l),k)!f&&!d&&h?(S.push(g=D("importer-script-"+o)||$("html",i[0])),g[w]("id","importer-script-"+o)):j.push(e);else if(n=M(n),f)S.push('<script id="importer-inline-script-'+o+'" '+n+">/*<![CDATA[*/ "+i[0]+" /*]]>*/<\/script>");else if(d)for(_=0,m=i.length;_<m;++_)I(i[_])?S.push('<script id="importer-inline-script-'+o+"-part-"+_+'" '+n+">/*<![CDATA[*/ "+i[_][0]+" /*]]>*/<\/script>"):S.push('<script id="importer-script-'+o+"-part-"+_+'" src="'+v.path_url(i[_])+'" '+n+"><\/script>");else S.push(h?i[0]:'<script id="importer-script-'+o+'" src="'+v.path_url(i)+'" '+n+"><\/script>");else p?(n=P({type:"text/x-template"},l),k?(S.push(g=f?D("importer-inline-tpl-"+o)||$("tpl",i[0],!1,n):D("importer-inline-tpl-"+o)||$("tpl",v.get(i),!1,n)),g[w]("id","importer-inline-tpl-"+o)):(n=M(n),S.push(f?'<script id="importer-inline-tpl-'+o+'" '+n+">"+i[0]+"<\/script>":'<script id="importer-inline-tpl-'+o+'" '+n+">"+v.get(i)+"<\/script>"))):S.push(f?i[0]:v.get(i))}else x.shift();return k&&j.length&&function i(o,t,l,c){var n,s,r,p=H("head",0);c=c||"",n=function(t,l){if(!t)return l();var e,n,s,r,a;"scripts-composite"===t.type?(t.asset=A(t.asset),r=0,(a=t.asset.length)?i(o,{id:t.id,type:"scripts",asset:t.asset[r],atts:t.atts,ctx:t.ctx},function e(){++r>=a?l():i(o,{id:t.id,type:"scripts",asset:t.asset[r],atts:t.atts,ctx:t.ctx},e,"-part-"+r)},"-part-"+r):l()):"scripts"===t.type&&(I(t.asset)?(s="importer-inline-script-"+t.id.replace(T,"_")+c,(n=D(s))&&"script"===n.tagName[q]()||(M(t.atts,n=z("script")),n[w]("type","text/javascript"),n[w]("id",s),n.appendChild(document.createTextNode("/*<![CDATA[*/ "+t.asset[0]+" /*]]>*/")),p.appendChild(n),o.trigger("import-asset",[o,t.id,t.type,t.asset,{}],t.ctx).trigger("import-asset-"+t.id,[o,t.id,t.type,t.asset,{}],t.ctx)),l()):(s="importer-script-"+t.id.replace(T,"_")+c,(n=D(s))&&"script"===n.tagName[q]()?l():(e=0,M(t.atts,n=z("script")),n[w]("type","text/javascript"),n[w]("id",s),n.onload=n.onreadystatechange=function(){e||n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(e=1,n.onload=n.onreadystatechange=null,o.trigger("import-asset",[o,t.id,t.type,t.asset,{}],t.ctx).trigger("import-asset-"+t.id,[o,t.id,t.type,t.asset,{}],t.ctx),l())},n[w]("src",o.path_url(t.asset)),p.appendChild(n))))},t&&t.deps&&t.deps.length?(s=t.deps.length,r=0,i(o,t.deps[0],function e(){++r>=s?n(t,l):i(o,t.deps[r],e)})):n(t,l)}(v,function e(t){var l=[],n=N.call(C,u)&&N.call(C[u],t)?u:"__global__";if(N.call(C[n],t)&&C[n][t][5]&&-1<j.indexOf(t)){var s,r,a,n=C[n][t],i=n[0],t=n[1],o=n[2],c=n[3],p=n[4];if(c&&c.length)for(r=c.length-1;0<=r;--r)s=c[r],a=N.call(C,u)&&N.call(C[u],s)?u:"__global__",N.call(C[a],s)&&-1<j.indexOf(s)&&(C[a][s][5]=!0,l.push(e(s)));return n[6]=!0,{id:t,type:i,asset:o,deps:l,atts:p,ctx:u}}return null}(j[j.length-1]),function(){}),S},assets:function(e,t){var l,n,s,r,a,i,o,c=this._assets,p=[];if(arguments.length||(e="scripts",t="__global__"),!(t=null==t?"__global__":t)||!N.call(c,t))return"";for(n in i=(e=e[q]())+"-composite",o=e+"-alt",c[t])!N.call(c[t],n)||e!==(s=c[t][n])[0]&&i!==s[0]&&o!==s[0]||!s[5]||s[6]||p.push(s[1]);if(k){for(r=0,a=p.length;r<a;++r)this.import_asset(p[r],t);l=""}else{for(l=[],r=0,a=p.length;r<a;++r)l=l.concat(this.import_asset(p[r],t));l=l.join("\n")}return l},enqueue:function(e,t,l,n){var s=this,r=s._assets,a=null,i=null,o=null;return I(l)?(a=l[0]||null,i=l[1]||null,o=l[2]||null):n=l,!(n=null==n?"__global__":n)||F(e)||F(t)||(l=N.call(r,n)&&N.call(r[n],t)?n:"__global__",N.call(r,l)&&N.call(r[l],t)?(r[l][t][5]=!0,s.trigger("enqueue-asset",[s,t,e,r[l][t][2]],n).trigger("enqueue-asset-"+t,[s,t,e,r[l][t][2]],n)):F(a)||(s.register("assets",[e,t,a,i,o],n),r[n][t][5]=!0,s.trigger("enqueue-asset",[s,t,e,r[n][t][2]],n).trigger("enqueue-asset-"+t,[s,t,e,r[n][t][2]],n))),s},get:function(e,t,l){var n,s=N.call(t=t||{},"default")?t.default:"",r=t.encoding||(O?"UTF-8":"utf8");return F(t.binary)||(r="binary"),l=l||t.complete||U(t)&&t,k?(n=this.path(e),L(n,r,function(e){U(l)&&l(e)},s)):(n=this.path(e),U(l)?L(n,r,l,s):W(n,r,s))},load:function(l,e,n,s){var r,a,i,o=this,t=null,c=null;return I(l)?(U(e)?(s=n,n=e):s=e,null==s&&(s="__global__"),r=l.length,a=new Array(r),i=0,function e(t){arguments.length&&(a[i]=t||null,++i),i<r?o.import_class(l[i],e,s):U(n)&&n.apply(o,a)}()):(U(e)?(s=n,n=e,e=null):I(e)?(t=e[0]||null,c=e[1]||null):2===arguments.length&&(s=e),null==s&&(s="__global__"),N.call(o._classes,s)&&N.call(o._classes[s],l)||N.call(o._classes.__global__,l)||F(t)||o.register("classes",[l,l,o.path(t),c],s),e=N.call(o._classes,s)&&N.call(o._classes[s],l)?s:"__global__",N.call(o._classes[e],l)&&!o._classes[e][l][4]?o.import_class(l,n,e):U(n)&&n.call(o,o._cache[e+"--class-"+l]||null)),o}},e.BASE=O?"./":R?__dirname:(B?this.location.href:H("script",-1).src||"./").split("/").slice(0,-1).join("/"),e});